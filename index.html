<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<title>Muslim App â€” Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ§Ù„Ø£Ø°ÙƒØ§Ø±</title>
<meta name="description" content="Coran, Duas et Adhkar â€” Application islamique complÃ¨te"/>
<meta name="theme-color" content="#0a0d14"/>
<link rel="manifest" href="manifest.json"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cinzel:wght@400;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet"/>
<style>
:root{
  --night:#0a0d14;--deep:#0f1520;--card:#141b2a;--card-hover:#1a2338;
  --gold:#c9a84c;--gold-light:#e8c97a;--gold-dim:#7a6030;
  --teal:#2a7a6e;--teal-light:#3da897;
  --text:#d4c5a0;--text-dim:#7a6e5a;--white:#f5f0e8;
  --completed:#1a3a2a;--completed-border:#2a7a4a;--green:#4ade80;
  --radius:16px;
  --blue:#4a7fc9;--purple:#8a6fc9;--rose:#c96a8a;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--night);color:var(--text);font-family:'Lato',sans-serif;min-height:100vh;overflow-x:hidden;}
a{text-decoration:none;color:inherit;}
button{cursor:pointer;font-family:inherit;}
.view{display:none;}.view.active{display:block;}

/* === BG === */
.bg-glow{position:fixed;top:-200px;left:50%;transform:translateX(-50%);width:800px;height:600px;background:radial-gradient(ellipse,rgba(201,168,76,.12),transparent 70%);pointer-events:none;z-index:0;}
.bg-pattern{position:fixed;inset:0;z-index:0;pointer-events:none;}
.bg-pattern svg{position:absolute;inset:0;width:100%;height:100%;opacity:.04;}

/* === LOADING === */
.loading-overlay{position:fixed;inset:0;background:rgba(10,13,20,.97);display:none;flex-direction:column;align-items:center;justify-content:center;z-index:9999;gap:20px;}
.loading-overlay.show{display:flex;}
.spinner{width:44px;height:44px;border:3px solid rgba(201,168,76,.2);border-top-color:var(--gold);border-radius:50%;animation:spin .7s linear infinite;}
@keyframes spin{to{transform:rotate(360deg)}}

/* === TOAST === */
.toast{position:fixed;top:20px;left:50%;transform:translateX(-50%) translateY(-100px);background:var(--card);border:1px solid rgba(201,168,76,.3);color:var(--gold-light);padding:12px 24px;border-radius:12px;font-size:.85rem;z-index:9999;transition:transform .4s ease;pointer-events:none;text-align:center;max-width:90%;}
.toast.show{transform:translateX(-50%) translateY(0);}

/* ============================================
   HOME PAGE
   ============================================ */
.home-hero{position:relative;z-index:10;text-align:center;padding:50px 20px 30px;}
.moon-icon{font-size:3rem;display:block;margin-bottom:12px;animation:float 4s ease-in-out infinite;}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
.home-greeting{font-family:'Amiri',serif;font-size:clamp(1.1rem,3vw,1.5rem);color:var(--gold);margin-bottom:8px;}
.home-title{font-family:'Amiri',serif;font-size:clamp(1.8rem,5vw,2.8rem);color:var(--gold-light);direction:rtl;margin-bottom:6px;line-height:1.3;}
.home-app-name{font-family:'Cinzel',serif;font-size:clamp(1rem,2.5vw,1.4rem);color:var(--white);letter-spacing:.2em;text-transform:uppercase;margin-bottom:4px;}
.home-tagline{font-size:.82rem;color:var(--text-dim);letter-spacing:.15em;margin-bottom:30px;}

/* Verse of the day */
.verse-of-day{max-width:600px;margin:0 auto 30px;background:linear-gradient(135deg,rgba(201,168,76,.08),rgba(201,168,76,.03));border:1px solid rgba(201,168,76,.18);border-radius:var(--radius);padding:20px 24px;text-align:center;}
.verse-of-day-label{font-size:.65rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:.2em;margin-bottom:10px;}
.verse-of-day-ar{font-family:'Amiri',serif;font-size:clamp(1.1rem,3vw,1.4rem);color:var(--gold-light);direction:rtl;line-height:2;margin-bottom:8px;}
.verse-of-day-tr{font-size:.82rem;color:var(--text-dim);line-height:1.6;font-style:italic;}
.verse-of-day-ref{font-size:.7rem;color:var(--gold-dim);margin-top:8px;}

/* Feature cards */
.features{max-width:700px;margin:0 auto;padding:0 20px 20px;display:grid;grid-template-columns:repeat(2,1fr);gap:16px;}
.feature-card{position:relative;background:var(--card);border:1px solid rgba(201,168,76,.12);border-radius:var(--radius);padding:28px 18px 22px;text-align:center;cursor:pointer;transition:all .3s;overflow:hidden;}
.feature-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;transition:opacity .3s;opacity:0;}
.feature-card:hover{transform:translateY(-4px);box-shadow:0 12px 36px rgba(0,0,0,.4);}
.feature-card:hover::before{opacity:1;}
.feature-card.card-quran{border-color:rgba(201,168,76,.2);}
.feature-card.card-quran::before{background:linear-gradient(90deg,transparent,var(--gold),transparent);}
.feature-card.card-quran:hover{border-color:rgba(201,168,76,.4);}
.feature-card.card-duas{border-color:rgba(74,127,201,.15);}
.feature-card.card-duas::before{background:linear-gradient(90deg,transparent,var(--blue),transparent);}
.feature-card.card-duas:hover{border-color:rgba(74,127,201,.35);}
.feature-card.card-adhkar{border-color:rgba(42,122,110,.15);}
.feature-card.card-adhkar::before{background:linear-gradient(90deg,transparent,var(--teal-light),transparent);}
.feature-card.card-adhkar:hover{border-color:rgba(42,122,110,.35);}
.feature-card.card-soon{border-color:rgba(255,255,255,.05);opacity:.5;cursor:default;}
.feature-card.card-soon:hover{transform:none;box-shadow:none;}

.feature-icon{font-size:2.4rem;display:block;margin-bottom:12px;}
.feature-title-ar{font-family:'Amiri',serif;font-size:1.2rem;color:var(--gold-light);direction:rtl;margin-bottom:4px;}
.feature-title{font-family:'Cinzel',serif;font-size:.8rem;color:var(--white);letter-spacing:.12em;text-transform:uppercase;margin-bottom:6px;}
.feature-desc{font-size:.72rem;color:var(--text-dim);line-height:1.4;}
.coming-badge{display:inline-block;background:rgba(201,168,76,.1);border:1px solid rgba(201,168,76,.2);color:var(--gold);font-size:.6rem;padding:3px 10px;border-radius:99px;margin-top:8px;letter-spacing:.1em;text-transform:uppercase;}

/* Quick stats */
.home-stats{max-width:700px;margin:0 auto;padding:20px;display:flex;justify-content:center;gap:30px;flex-wrap:wrap;}
.stat-item{text-align:center;}
.stat-num{font-family:'Cinzel',serif;font-size:1.4rem;color:var(--gold-light);font-weight:700;}
.stat-label{font-size:.65rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:.1em;margin-top:2px;}

/* Settings button on home */
.home-settings{text-align:center;padding:10px 20px 20px;}
.home-settings-btn{background:var(--card);border:1px solid rgba(201,168,76,.15);color:var(--gold);font-size:.78rem;padding:10px 24px;border-radius:10px;display:inline-flex;align-items:center;gap:8px;transition:all .2s;}
.home-settings-btn:hover{border-color:var(--gold);background:var(--card-hover);}

/* Footer */
footer{position:relative;z-index:10;text-align:center;padding:24px 20px 36px;border-top:1px solid rgba(201,168,76,.08);}
.footer-dua{font-family:'Amiri',serif;font-size:1rem;color:var(--gold);direction:rtl;margin-bottom:10px;line-height:1.8;}
.footer-credit{font-size:.72rem;color:var(--text-dim);}
.footer-credit a{color:var(--teal-light);}

/* ============================================
   SECTION HEADER (reusable)
   ============================================ */
.section-header{position:sticky;top:0;z-index:100;background:rgba(15,21,32,.97);border-bottom:1px solid rgba(201,168,76,.2);display:flex;align-items:center;padding:12px 16px;gap:10px;backdrop-filter:blur(12px);}
.sec-back{background:rgba(201,168,76,.15);border:1px solid rgba(201,168,76,.3);color:var(--gold-light);font-size:.85rem;padding:10px 16px;border-radius:10px;display:flex;align-items:center;gap:6px;transition:all .2s;flex-shrink:0;font-weight:600;}
.sec-back:hover{border-color:var(--gold);background:rgba(201,168,76,.25);}
.sec-title-area{flex:1;text-align:center;min-width:0;overflow:hidden;}
.sec-title{font-family:'Amiri',serif;font-size:1.15rem;color:var(--gold-light);direction:rtl;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.sec-subtitle{font-size:.65rem;color:var(--text-dim);letter-spacing:.08em;margin-top:2px;}
.sec-actions{display:flex;gap:6px;flex-shrink:0;}
.sec-actions button{background:rgba(201,168,76,.08);border:1px solid rgba(201,168,76,.15);color:var(--gold);width:38px;height:38px;border-radius:10px;font-size:1rem;display:flex;align-items:center;justify-content:center;transition:all .2s;}
.sec-actions button:hover{border-color:var(--gold);background:rgba(201,168,76,.15);}
.sec-actions button.on{background:rgba(201,168,76,.25);border-color:var(--gold);}

/* ============================================
   QURAN SECTION
   ============================================ */
.quran-tabs{display:flex;justify-content:center;gap:0;padding:16px 20px 0;background:linear-gradient(180deg,rgba(201,168,76,.04),transparent);}
.tab-btn{background:none;border:none;color:var(--text-dim);font-family:'Cinzel',serif;font-size:.75rem;letter-spacing:.1em;text-transform:uppercase;padding:10px 20px;border-bottom:2px solid transparent;transition:all .3s;}
.tab-btn.active{color:var(--gold-light);border-bottom-color:var(--gold);}
.tab-btn:hover{color:var(--gold);}

.quran-progress{display:flex;align-items:center;justify-content:center;gap:12px;padding:16px 20px 0;flex-wrap:wrap;}
.progress-label{font-family:'Cinzel',serif;font-size:.75rem;color:var(--gold);letter-spacing:.1em;}
.progress-bar-wrap{width:180px;height:5px;background:rgba(201,168,76,.15);border-radius:99px;overflow:hidden;}
.progress-bar-fill{height:100%;background:linear-gradient(90deg,var(--gold-dim),var(--gold-light));border-radius:99px;transition:width .5s;width:0%;}
.progress-count{font-family:'Cinzel',serif;font-size:.75rem;color:var(--gold-light);font-weight:600;}

.grid-wrap{max-width:1100px;margin:0 auto;padding:20px 20px 60px;}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(145px,1fr));gap:12px;}

.juz-card{position:relative;background:var(--card);border:1px solid rgba(201,168,76,.12);border-radius:var(--radius);padding:18px 12px 38px;text-align:center;cursor:pointer;transition:all .3s;overflow:hidden;animation:fadeUp .4s ease both;}
.juz-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--gold-dim),transparent);opacity:0;transition:opacity .3s;}
.juz-card:hover{background:var(--card-hover);border-color:rgba(201,168,76,.35);transform:translateY(-3px);box-shadow:0 10px 28px rgba(0,0,0,.4);}
.juz-card:hover::before{opacity:1;}
.juz-card.completed{background:var(--completed);border-color:var(--completed-border);}
.juz-card.completed::after{content:'âœ“';position:absolute;top:7px;right:9px;color:var(--green);font-size:.85rem;font-weight:700;}
@keyframes fadeUp{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}
.juz-arabic{font-family:'Amiri',serif;font-size:.9rem;color:var(--gold-light);display:block;margin-bottom:3px;direction:rtl;}
.juz-label{font-family:'Cinzel',serif;font-size:.55rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:.2em;display:block;margin-bottom:4px;}
.juz-number{font-family:'Cinzel',serif;font-size:1.8rem;font-weight:700;color:var(--white);line-height:1;display:block;margin-bottom:8px;}
.listen-badge{display:inline-flex;align-items:center;gap:4px;background:linear-gradient(135deg,rgba(201,168,76,.15),rgba(201,168,76,.05));border:1px solid rgba(201,168,76,.2);color:var(--gold);font-size:.6rem;font-weight:700;letter-spacing:.08em;text-transform:uppercase;padding:4px 8px;border-radius:99px;}
.mark-btn{position:absolute;bottom:0;left:0;right:0;background:rgba(74,222,128,.06);border:none;border-top:1px solid rgba(74,222,128,.1);color:var(--green);font-size:.58rem;letter-spacing:.06em;text-transform:uppercase;padding:5px;border-radius:0 0 var(--radius) var(--radius);transition:background .2s;}
.mark-btn:hover{background:rgba(74,222,128,.14);}

/* Surah list */
.surah-wrap{display:none;max-width:700px;margin:0 auto;padding:0 20px 60px;}
.surah-wrap.active{display:block;}
.search-wrap{padding:0 0 14px;position:relative;}
.search-input{width:100%;background:var(--card);border:1px solid rgba(201,168,76,.2);border-radius:12px;padding:12px 16px 12px 42px;color:var(--white);font-size:.9rem;outline:none;transition:border-color .3s;}
.search-input:focus{border-color:var(--gold);}
.search-input::placeholder{color:var(--text-dim);}
.search-icon{position:absolute;left:14px;top:12px;font-size:1rem;}
.surah-item{display:flex;align-items:center;gap:12px;padding:12px 14px;background:var(--card);border:1px solid rgba(201,168,76,.08);border-radius:12px;margin-bottom:7px;cursor:pointer;transition:all .2s;}
.surah-item:hover{background:var(--card-hover);border-color:rgba(201,168,76,.25);}
.surah-num{width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:rgba(201,168,76,.1);border:1px solid rgba(201,168,76,.2);border-radius:8px;font-family:'Cinzel',serif;font-size:.8rem;color:var(--gold);font-weight:600;flex-shrink:0;}
.surah-info{flex:1;min-width:0;}
.surah-name-ar{font-family:'Amiri',serif;font-size:1.05rem;color:var(--gold-light);direction:rtl;text-align:right;}
.surah-name-en{font-size:.72rem;color:var(--text-dim);margin-top:1px;}
.surah-meta{text-align:right;flex-shrink:0;}
.surah-ayah-count{font-size:.68rem;color:var(--text-dim);}
.surah-type{font-size:.58rem;color:var(--teal-light);text-transform:uppercase;letter-spacing:.06em;margin-top:2px;}

/* ============================================
   READER
   ============================================ */
.reader-content{max-width:800px;margin:0 auto;padding:0 16px 200px;min-height:80vh;}
.surah-banner{text-align:center;padding:26px 20px;margin:14px 0 18px;background:linear-gradient(180deg,rgba(201,168,76,.08),rgba(201,168,76,.02));border:1px solid rgba(201,168,76,.2);border-radius:var(--radius);position:relative;}
.surah-banner::before,.surah-banner::after{content:'âœ¦';position:absolute;top:50%;color:rgba(201,168,76,.3);font-size:.75rem;}
.surah-banner::before{left:14px;transform:translateY(-50%);}
.surah-banner::after{right:14px;transform:translateY(-50%);}
.surah-banner-name{font-family:'Amiri',serif;font-size:1.7rem;color:var(--gold-light);direction:rtl;margin-bottom:4px;}
.surah-banner-en{font-family:'Cinzel',serif;font-size:.8rem;color:var(--white);letter-spacing:.1em;margin-bottom:4px;}
.surah-banner-detail{font-size:.7rem;color:var(--text-dim);letter-spacing:.08em;}
.bismillah{text-align:center;font-family:'Amiri',serif;font-size:1.4rem;color:var(--gold);direction:rtl;padding:10px 0 18px;opacity:.9;}
.verse{padding:14px 12px;border-bottom:1px solid rgba(201,168,76,.05);transition:background .3s;cursor:pointer;border-radius:8px;margin-bottom:2px;}
.verse:hover{background:rgba(201,168,76,.04);}
.verse.playing{background:rgba(201,168,76,.1);border-left:3px solid var(--gold);border-radius:0 8px 8px 0;}
.verse-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;}
.verse-num-badge{display:inline-flex;align-items:center;justify-content:center;min-width:32px;height:32px;padding:0 6px;background:rgba(201,168,76,.1);border:1px solid rgba(201,168,76,.2);border-radius:50%;font-family:'Amiri',serif;font-size:.8rem;color:var(--gold);}
.verse-play-btn{background:rgba(201,168,76,.1);border:1px solid rgba(201,168,76,.2);color:var(--gold);font-size:.72rem;padding:5px 10px;border-radius:18px;transition:all .2s;}
.verse-play-btn:hover{background:rgba(201,168,76,.2);}
.verse-play-btn.active-v{background:var(--gold);color:var(--night);}
.verse-arabic{font-family:'Amiri',serif;font-size:clamp(1.25rem,3.5vw,1.65rem);line-height:2.3;color:var(--white);text-align:right;direction:rtl;margin-bottom:8px;word-spacing:3px;}
.verse-translation{font-size:.85rem;color:var(--text-dim);line-height:1.7;padding-left:12px;border-left:2px solid rgba(201,168,76,.12);margin-top:6px;}
.nav-buttons{display:flex;justify-content:center;gap:10px;padding:16px;max-width:800px;margin:0 auto;}
.nav-btn{background:var(--card);border:1px solid rgba(201,168,76,.2);color:var(--gold);padding:10px 18px;border-radius:10px;font-size:.78rem;font-family:'Cinzel',serif;letter-spacing:.06em;transition:all .2s;display:flex;align-items:center;gap:6px;}
.nav-btn:hover{background:var(--card-hover);border-color:var(--gold);}
.nav-btn:disabled{opacity:.3;cursor:not-allowed;}

/* ============================================
   DUAS & ADHKAR SECTIONS
   ============================================ */
.dua-categories{max-width:700px;margin:0 auto;padding:20px 20px 60px;display:grid;grid-template-columns:repeat(2,1fr);gap:12px;}
.dua-cat{background:var(--card);border:1px solid rgba(74,127,201,.1);border-radius:var(--radius);padding:20px 14px;text-align:center;cursor:pointer;transition:all .3s;}
.dua-cat:hover{background:var(--card-hover);border-color:rgba(74,127,201,.3);transform:translateY(-2px);}
.dua-cat-icon{font-size:1.8rem;display:block;margin-bottom:8px;}
.dua-cat-ar{font-family:'Amiri',serif;font-size:1rem;color:var(--gold-light);direction:rtl;margin-bottom:4px;}
.dua-cat-name{font-size:.72rem;color:var(--text-dim);letter-spacing:.06em;text-transform:uppercase;}
.dua-cat-count{font-size:.6rem;color:var(--text-dim);margin-top:4px;}

.adhkar-cats{max-width:700px;margin:0 auto;padding:20px 20px 60px;display:grid;grid-template-columns:1fr;gap:12px;}
.adhkar-cat{background:var(--card);border:1px solid rgba(42,122,110,.12);border-radius:var(--radius);padding:18px 16px;display:flex;align-items:center;gap:14px;cursor:pointer;transition:all .3s;}
.adhkar-cat:hover{background:var(--card-hover);border-color:rgba(42,122,110,.3);transform:translateX(4px);}
.adhkar-cat-icon{font-size:2rem;flex-shrink:0;}
.adhkar-cat-info{flex:1;}
.adhkar-cat-ar{font-family:'Amiri',serif;font-size:1.1rem;color:var(--gold-light);direction:rtl;text-align:right;}
.adhkar-cat-name{font-size:.78rem;color:var(--text-dim);margin-top:2px;}
.adhkar-cat-count{font-size:.7rem;color:var(--teal-light);}

/* Dua/Dhikr display */
.content-list{max-width:700px;margin:0 auto;padding:16px 16px 100px;}
.dua-card{background:var(--card);border:1px solid rgba(201,168,76,.1);border-radius:var(--radius);padding:20px 18px;margin-bottom:14px;transition:all .2s;}
.dua-card-num{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;background:rgba(201,168,76,.1);border:1px solid rgba(201,168,76,.2);border-radius:50%;font-family:'Cinzel',serif;font-size:.7rem;color:var(--gold);margin-bottom:10px;}
.dua-card-title{font-family:'Cinzel',serif;font-size:.75rem;color:var(--gold);text-transform:uppercase;letter-spacing:.1em;margin-bottom:12px;}
.dua-card-arabic{font-family:'Amiri',serif;font-size:clamp(1.2rem,3vw,1.5rem);color:var(--white);direction:rtl;text-align:right;line-height:2.2;margin-bottom:12px;padding:10px 0;border-bottom:1px solid rgba(201,168,76,.08);}
.dua-card-trans{font-size:.85rem;color:var(--text-dim);line-height:1.7;margin-bottom:10px;font-style:italic;}
.dua-card-source{font-size:.68rem;color:var(--gold-dim);display:flex;align-items:center;gap:6px;}
.dua-card-repeat{display:inline-flex;align-items:center;gap:4px;background:rgba(42,122,110,.1);border:1px solid rgba(42,122,110,.2);color:var(--teal-light);font-size:.65rem;padding:3px 10px;border-radius:99px;margin-top:8px;}

/* Counter button for adhkar */
.dhikr-counter{display:flex;align-items:center;justify-content:center;gap:14px;margin-top:12px;padding-top:10px;border-top:1px solid rgba(201,168,76,.06);}
.counter-btn{background:linear-gradient(135deg,rgba(201,168,76,.2),rgba(201,168,76,.08));border:1px solid rgba(201,168,76,.3);color:var(--gold);width:44px;height:44px;border-radius:50%;font-size:1.2rem;display:flex;align-items:center;justify-content:center;transition:all .2s;}
.counter-btn:hover{background:linear-gradient(135deg,rgba(201,168,76,.35),rgba(201,168,76,.15));}
.counter-btn.done{background:rgba(74,222,128,.15);border-color:var(--green);color:var(--green);}
.counter-display{font-family:'Cinzel',serif;font-size:1.3rem;color:var(--white);min-width:50px;text-align:center;}
.counter-target{font-size:.7rem;color:var(--text-dim);}

/* ============================================
   AUDIO PLAYER
   ============================================ */
.audio-player{position:fixed;bottom:0;left:0;right:0;background:linear-gradient(180deg,rgba(15,21,32,.98),#080b11);border-top:1px solid rgba(201,168,76,.25);padding:8px 16px 14px;z-index:200;display:none;backdrop-filter:blur(12px);}
.audio-player.show{display:block;}
.player-progress{width:100%;height:4px;background:rgba(201,168,76,.15);border-radius:99px;margin-bottom:8px;cursor:pointer;}
.player-progress-fill{height:100%;background:linear-gradient(90deg,var(--gold-dim),var(--gold));border-radius:99px;transition:width .2s;width:0%;}
.player-main{display:flex;align-items:center;gap:10px;}
.player-info{flex:1;min-width:0;}
.player-surah-name{font-family:'Amiri',serif;color:var(--gold-light);font-size:.88rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.player-ayah-num{color:var(--text-dim);font-size:.66rem;margin-top:2px;}
.player-controls{display:flex;align-items:center;gap:2px;}
.player-controls button{background:none;border:none;color:var(--gold);font-size:1rem;width:38px;height:38px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s;}
.player-controls button:hover{background:rgba(201,168,76,.12);}
.play-main{background:linear-gradient(135deg,var(--gold-dim),var(--gold))!important;color:var(--night)!important;width:44px!important;height:44px!important;font-size:1.2rem!important;}
.player-extra{display:flex;align-items:center;gap:2px;}
.player-extra button{background:none;border:none;color:var(--text-dim);font-size:.8rem;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s;}
.player-extra button:hover{color:var(--gold);}
.player-extra button.on{color:var(--gold);}

/* ============================================
   SETTINGS
   ============================================ */
.settings-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:300;display:none;align-items:flex-end;justify-content:center;backdrop-filter:blur(4px);}
.settings-overlay.show{display:flex;}
.settings-panel{background:var(--deep);border:1px solid rgba(201,168,76,.2);border-radius:24px 24px 0 0;padding:24px 20px 40px;width:100%;max-width:500px;animation:slideUp .3s ease;}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
.settings-handle{width:40px;height:4px;background:rgba(201,168,76,.3);border-radius:99px;margin:0 auto 20px;}
.settings-title{font-family:'Cinzel',serif;font-size:1rem;color:var(--gold-light);text-align:center;margin-bottom:20px;letter-spacing:.1em;}
.setting-group{margin-bottom:16px;}
.setting-label{font-size:.72rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:.1em;margin-bottom:6px;display:block;}
.setting-select{width:100%;background:var(--card);border:1px solid rgba(201,168,76,.2);border-radius:10px;padding:11px 12px;color:var(--white);font-size:.88rem;outline:none;appearance:none;cursor:pointer;}
.setting-select option{background:var(--deep);color:var(--white);}
.settings-close{display:block;width:100%;background:rgba(201,168,76,.1);border:1px solid rgba(201,168,76,.25);color:var(--gold);font-family:'Cinzel',serif;font-size:.82rem;padding:12px;border-radius:12px;margin-top:12px;letter-spacing:.1em;transition:all .2s;}
.settings-close:hover{background:rgba(201,168,76,.2);}

/* ============================================
   RESPONSIVE
   ============================================ */
@media(max-width:480px){
  .grid{grid-template-columns:repeat(3,1fr);gap:8px;}
  .juz-number{font-size:1.4rem;}
  .juz-arabic{font-size:.78rem;}
  .listen-badge{font-size:.5rem;padding:3px 6px;}
  .features{grid-template-columns:repeat(2,1fr);gap:10px;}
  .feature-icon{font-size:2rem;}
  .feature-title-ar{font-size:1rem;}
  .dua-categories{grid-template-columns:repeat(2,1fr);gap:10px;}
  .verse-arabic{font-size:1.15rem;line-height:2;}
  .section-header{padding:10px 10px;gap:6px;}
  .sec-back{padding:8px 10px;font-size:.75rem;}
  .home-hero{padding:35px 16px 24px;}
  .player-main{gap:6px;}
}
</style>
</head>
<body>

<div class="bg-glow"></div>
<div class="bg-pattern">
  <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice">
    <defs><pattern id="geo" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
      <polygon points="20,2 38,11 38,29 20,38 2,29 2,11" fill="none" stroke="#c9a84c" stroke-width="0.5"/>
      <polygon points="20,8 32,14 32,26 20,32 8,26 8,14" fill="none" stroke="#c9a84c" stroke-width="0.3"/>
    </pattern></defs>
    <rect width="200" height="200" fill="url(#geo)"/>
  </svg>
</div>

<div class="loading-overlay" id="loading"><div class="spinner"></div><div id="loading-msg" style="font-family:Amiri,serif;color:var(--gold);font-size:1rem;">ØªØ­Ù…ÙŠÙ„...</div></div>
<div class="toast" id="toast"></div>

<!-- ================================ -->
<!-- VIEW: HOME                       -->
<!-- ================================ -->
<div class="view active" id="view-home">
  <div class="home-hero">
    <span class="moon-icon">ğŸŒ™</span>
    <div class="home-greeting" id="greeting"></div>
    <div class="home-title">Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
    <div class="home-app-name">Muslim App</div>
    <div class="home-tagline">Coran Â· Invocations Â· Adhkar</div>
  </div>

  <div class="verse-of-day" id="verse-of-day">
    <div class="verse-of-day-label">âœ¦ Verset du jour âœ¦</div>
    <div class="verse-of-day-ar" id="vod-ar"></div>
    <div class="verse-of-day-tr" id="vod-tr"></div>
    <div class="verse-of-day-ref" id="vod-ref"></div>
  </div>

  <div class="features">
    <div class="feature-card card-quran" onclick="goToQuran()">
      <span class="feature-icon">ğŸ“–</span>
      <div class="feature-title-ar">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</div>
      <div class="feature-title">Le Coran</div>
      <div class="feature-desc">Lisez et Ã©coutez les 30 Juz et 114 Sourates</div>
    </div>
    <div class="feature-card card-duas" onclick="goToDuas()">
      <span class="feature-icon">ğŸ¤²</span>
      <div class="feature-title-ar">Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©</div>
      <div class="feature-title">Invocations</div>
      <div class="feature-desc">Duas quotidiennes du Coran et de la Sunnah</div>
    </div>
    <div class="feature-card card-adhkar" onclick="goToAdhkar()">
      <span class="feature-icon">ğŸ“¿</span>
      <div class="feature-title-ar">Ø§Ù„Ø£Ø°ÙƒØ§Ø±</div>
      <div class="feature-title">Adhkar</div>
      <div class="feature-desc">Rappels du matin, du soir et aprÃ¨s la priÃ¨re</div>
    </div>
    <div class="feature-card card-soon">
      <span class="feature-icon">ğŸ•Œ</span>
      <div class="feature-title-ar">Ø§Ù„Ù…Ø²ÙŠØ¯</div>
      <div class="feature-title">BientÃ´t</div>
      <div class="feature-desc">Horaires de priÃ¨re, Tasbih, Qibla...</div>
      <span class="coming-badge">In Shaa Allah</span>
    </div>
  </div>

  <div class="home-stats">
    <div class="stat-item"><div class="stat-num" id="stat-juz">0</div><div class="stat-label">Juz lus</div></div>
    <div class="stat-item"><div class="stat-num">114</div><div class="stat-label">Sourates</div></div>
    <div class="stat-item"><div class="stat-num">6236</div><div class="stat-label">Versets</div></div>
  </div>

  <div class="home-settings">
    <button class="home-settings-btn" onclick="openSettings()">âš™ï¸ ParamÃ¨tres (RÃ©citateur & Traduction)</button>
  </div>

  <footer>
    <div class="footer-dua">Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ ØªÙÙ‚ÙØ¨ÙÙ‘Ù„Ù’ Ù…ÙÙ†ÙÙ‘Ø§ Ø¥ÙÙ†ÙÙ‘ÙƒÙ Ø£ÙÙ†ØªÙ Ø§Ù„Ø³ÙÙ‘Ù…ÙÙŠØ¹Ù Ø§Ù„Ù’Ø¹ÙÙ„ÙÙŠÙ…Ù ğŸ¤²</div>
    <div class="footer-credit">Made with â¤ï¸ by <a href="https://github.com/" target="_blank">Mouhamadou</a> Â· Sadaqa Jariya</div>
  </footer>
</div>

<!-- ================================ -->
<!-- VIEW: QURAN                      -->
<!-- ================================ -->
<div class="view" id="view-quran">
  <div class="section-header">
    <button class="sec-back" onclick="goHome()">â† Accueil</button>
    <div class="sec-title-area">
      <div class="sec-title">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</div>
      <div class="sec-subtitle">Le Noble Coran</div>
    </div>
    <div class="sec-actions">
      <button onclick="openSettings()" title="ParamÃ¨tres">âš™ï¸</button>
    </div>
  </div>

  <div class="quran-progress">
    <span class="progress-label">Progression</span>
    <div class="progress-bar-wrap"><div class="progress-bar-fill" id="progressFill"></div></div>
    <span class="progress-count" id="progressCount">0/30</span>
  </div>

  <div class="quran-tabs">
    <button class="tab-btn active" id="tab-juz" onclick="switchTab('juz')">ğŸ“– Par Juz</button>
    <button class="tab-btn" id="tab-surah" onclick="switchTab('surah')">ğŸ“‹ Par Sourate</button>
  </div>

  <div class="grid-wrap" id="juz-section"><div class="grid" id="juz-grid"></div></div>
  <div class="surah-wrap" id="surah-section">
    <div class="search-wrap">
      <span class="search-icon">ğŸ”</span>
      <input class="search-input" type="text" placeholder="Rechercher une sourate..." oninput="filterSurahs(this.value)"/>
    </div>
    <div id="surah-list"></div>
  </div>
</div>

<!-- ================================ -->
<!-- VIEW: READER                     -->
<!-- ================================ -->
<div class="view" id="view-reader">
  <div class="section-header">
    <button class="sec-back" onclick="goToQuran()">â† Coran</button>
    <div class="sec-title-area">
      <div class="sec-title" id="reader-title"></div>
      <div class="sec-subtitle" id="reader-subtitle"></div>
    </div>
    <div class="sec-actions">
      <button onclick="toggleTranslation()" id="btn-trans" class="on" title="Traduction">ğŸŒ</button>
      <button onclick="openSettings()" title="ParamÃ¨tres">âš™ï¸</button>
    </div>
  </div>
  <div class="reader-content" id="reader-content"></div>
  <div id="reader-nav"></div>
</div>

<!-- ================================ -->
<!-- VIEW: DUAS                       -->
<!-- ================================ -->
<div class="view" id="view-duas">
  <div class="section-header">
    <button class="sec-back" id="duas-back" onclick="goHome()">â† Accueil</button>
    <div class="sec-title-area">
      <div class="sec-title" id="duas-title">Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©</div>
      <div class="sec-subtitle" id="duas-subtitle">Invocations Quotidiennes</div>
    </div>
    <div class="sec-actions"></div>
  </div>
  <div id="duas-content"></div>
</div>

<!-- ================================ -->
<!-- VIEW: ADHKAR                     -->
<!-- ================================ -->
<div class="view" id="view-adhkar">
  <div class="section-header">
    <button class="sec-back" id="adhkar-back" onclick="goHome()">â† Accueil</button>
    <div class="sec-title-area">
      <div class="sec-title" id="adhkar-title">Ø§Ù„Ø£Ø°ÙƒØ§Ø±</div>
      <div class="sec-subtitle" id="adhkar-subtitle">Rappels Quotidiens</div>
    </div>
    <div class="sec-actions"></div>
  </div>
  <div id="adhkar-content"></div>
</div>

<!-- AUDIO PLAYER -->
<div class="audio-player" id="audio-player">
  <div class="player-progress" id="player-progress" onclick="seekAudio(event)">
    <div class="player-progress-fill" id="player-progress-fill"></div>
  </div>
  <div class="player-main">
    <div class="player-info">
      <div class="player-surah-name" id="player-surah">â€”</div>
      <div class="player-ayah-num" id="player-ayah">â€”</div>
    </div>
    <div class="player-controls">
      <button onclick="prevAyah()">â®</button>
      <button class="play-main" onclick="togglePlay()" id="play-btn">â–¶</button>
      <button onclick="nextAyah()">â­</button>
    </div>
    <div class="player-extra">
      <button onclick="toggleRepeat()" id="btn-repeat">ğŸ”</button>
      <button onclick="toggleAutoplay()" id="btn-autoplay" class="on">â©</button>
    </div>
  </div>
</div>

<!-- SETTINGS -->
<div class="settings-overlay" id="settings-overlay" onclick="if(event.target===this)closeSettings()">
  <div class="settings-panel">
    <div class="settings-handle"></div>
    <div class="settings-title">âš™ï¸ ParamÃ¨tres</div>
    <div class="setting-group">
      <label class="setting-label">ğŸ™ï¸ RÃ©citateur</label>
      <select class="setting-select" id="select-reciter" onchange="changeReciter(this.value)">
        <option value="ar.alafasy">Mishary Rashid Alafasy</option>
        <option value="ar.abdulbasitmurattal">Abdul Basit (Murattal)</option>
        <option value="ar.abdurrahmaansudais">Abdurrahman As-Sudais</option>
        <option value="ar.husary">Mahmoud Khalil Al-Husary</option>
        <option value="ar.minshawimujawwad">El-Minshawi (Mujawwad)</option>
      </select>
    </div>
    <div class="setting-group">
      <label class="setting-label">ğŸŒ Traduction</label>
      <select class="setting-select" id="select-translation" onchange="changeTranslation(this.value)">
        <option value="fr.hamidullah">ğŸ‡«ğŸ‡· FranÃ§ais â€” Hamidullah</option>
        <option value="en.sahih">ğŸ‡¬ğŸ‡§ English â€” Sahih International</option>
        <option value="en.pickthall">ğŸ‡¬ğŸ‡§ English â€” Pickthall</option>
      </select>
    </div>
    <button class="settings-close" onclick="closeSettings()">âœ“ Fermer</button>
  </div>
</div>

<audio id="quran-audio" preload="auto"></audio>

<script>
/* ================================================================
   DATA: DUAS
   ================================================================ */
const DUAS_CATEGORIES = [
  {id:'morning', icon:'ğŸŒ…', ar:'Ø£Ø¯Ø¹ÙŠØ© Ø§Ù„ØµØ¨Ø§Ø­', fr:'Duas du Matin'},
  {id:'evening', icon:'ğŸŒ™', ar:'Ø£Ø¯Ø¹ÙŠØ© Ø§Ù„Ù…Ø³Ø§Ø¡', fr:'Duas du Soir'},
  {id:'salah', icon:'ğŸ•Œ', ar:'Ø£Ø¯Ø¹ÙŠØ© Ø§Ù„ØµÙ„Ø§Ø©', fr:'Duas de la PriÃ¨re'},
  {id:'food', icon:'ğŸ½ï¸', ar:'Ø£Ø¯Ø¹ÙŠØ© Ø§Ù„Ø·Ø¹Ø§Ù…', fr:'Duas du Repas'},
  {id:'sleep', icon:'ğŸ˜´', ar:'Ø£Ø¯Ø¹ÙŠØ© Ø§Ù„Ù†ÙˆÙ…', fr:'Duas du Sommeil'},
  {id:'travel', icon:'âœˆï¸', ar:'Ø£Ø¯Ø¹ÙŠØ© Ø§Ù„Ø³ÙØ±', fr:'Duas du Voyage'},
  {id:'protection', icon:'ğŸ›¡ï¸', ar:'Ø£Ø¯Ø¹ÙŠØ© Ø§Ù„Ø­Ù…Ø§ÙŠØ©', fr:'Duas de Protection'},
  {id:'forgiveness', icon:'ğŸ’š', ar:'Ø§Ù„Ø§Ø³ØªØºÙØ§Ø±', fr:'Demande de Pardon'},
  {id:'parents', icon:'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§', ar:'Ø£Ø¯Ø¹ÙŠØ© Ù„Ù„ÙˆØ§Ù„Ø¯ÙŠÙ†', fr:'Duas pour les Parents'},
  {id:'general', icon:'â­', ar:'Ø£Ø¯Ø¹ÙŠØ© Ù…ØªÙ†ÙˆØ¹Ø©', fr:'Duas GÃ©nÃ©rales'}
];

const DUAS_DATA = [
  // MORNING
  {cat:'morning', ar:'Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¨ÙÙƒÙ Ø£ÙØµÙ’Ø¨ÙØ­Ù’Ù†ÙØ§ ÙˆÙØ¨ÙÙƒÙ Ø£ÙÙ…Ù’Ø³ÙÙŠÙ’Ù†ÙØ§ ÙˆÙØ¨ÙÙƒÙ Ù†ÙØ­Ù’ÙŠÙØ§ ÙˆÙØ¨ÙÙƒÙ Ù†ÙÙ…ÙÙˆØªÙ ÙˆÙØ¥ÙÙ„ÙÙŠÙ’ÙƒÙ Ø§Ù„Ù†ÙÙ‘Ø´ÙÙˆØ±Ù', fr:'Ã” Allah, c\'est par Toi que nous sommes arrivÃ©s au matin, et c\'est par Toi que nous arrivons au soir. C\'est par Toi que nous vivons et par Toi que nous mourrons, et c\'est vers Toi la rÃ©surrection.', src:'At-Tirmidhi'},
  {cat:'morning', ar:'Ø£ÙØµÙ’Ø¨ÙØ­Ù’Ù†ÙØ§ ÙˆÙØ£ÙØµÙ’Ø¨ÙØ­Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ Ù„ÙÙ„ÙÙ‘Ù‡Ù ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡ÙØŒ Ù„ÙÙ‡Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ ÙˆÙÙ„ÙÙ‡Ù Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù ÙˆÙÙ‡ÙÙˆÙ Ø¹ÙÙ„ÙÙ‰ ÙƒÙÙ„ÙÙ‘ Ø´ÙÙŠÙ’Ø¡Ù Ù‚ÙØ¯ÙÙŠØ±ÙŒ', fr:'Nous voilÃ  au matin et le royaume appartient Ã  Allah. Louange Ã  Allah. Il n\'y a de divinitÃ© qu\'Allah seul, sans associÃ©. Ã€ Lui la souverainetÃ©, Ã  Lui la louange et Il est capable de toute chose.', src:'Muslim'},
  {cat:'morning', ar:'Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ³Ù’Ø£ÙÙ„ÙÙƒÙ Ø§Ù„Ù’Ø¹ÙÙÙ’ÙˆÙ ÙˆÙØ§Ù„Ù’Ø¹ÙØ§ÙÙÙŠÙØ©Ù ÙÙÙŠ Ø§Ù„Ø¯ÙÙ‘Ù†Ù’ÙŠÙØ§ ÙˆÙØ§Ù„Ø¢Ø®ÙØ±ÙØ©Ù', fr:'Ã” Allah, je Te demande le pardon et la santÃ© dans ce monde et dans l\'au-delÃ .', src:'Ibn Majah'},
  {cat:'morning', ar:'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ù„ÙØ§ ÙŠÙØ¶ÙØ±ÙÙ‘ Ù…ÙØ¹Ù Ø§Ø³Ù’Ù…ÙÙ‡Ù Ø´ÙÙŠÙ’Ø¡ÙŒ ÙÙÙŠ Ø§Ù„Ù’Ø£ÙØ±Ù’Ø¶Ù ÙˆÙÙ„ÙØ§ ÙÙÙŠ Ø§Ù„Ø³ÙÙ‘Ù…ÙØ§Ø¡Ù ÙˆÙÙ‡ÙÙˆÙ Ø§Ù„Ø³ÙÙ‘Ù…ÙÙŠØ¹Ù Ø§Ù„Ù’Ø¹ÙÙ„ÙÙŠÙ…Ù', fr:'Au nom d\'Allah, rien ne peut nuire avec Son nom, ni sur terre ni au ciel, et Il est l\'Audient, l\'Omniscient.', src:'Abu Dawud â€” 3x',count:3},
  {cat:'morning', ar:'Ø±ÙØ¶ÙÙŠØªÙ Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù Ø±ÙØ¨Ù‹Ù‘Ø§ ÙˆÙØ¨ÙØ§Ù„Ù’Ø¥ÙØ³Ù’Ù„ÙØ§Ù…Ù Ø¯ÙÙŠÙ†Ù‹Ø§ ÙˆÙØ¨ÙÙ…ÙØ­ÙÙ…ÙÙ‘Ø¯Ù ØµÙÙ„ÙÙ‘Ù‰ Ø§Ù„Ù„Ù‡Ù Ø¹ÙÙ„ÙÙŠÙ’Ù‡Ù ÙˆÙØ³ÙÙ„ÙÙ‘Ù…Ù Ù†ÙØ¨ÙÙŠÙ‹Ù‘Ø§', fr:'J\'accepte Allah comme Seigneur, l\'Islam comme religion et Muhammad ï·º comme prophÃ¨te.', src:'Abu Dawud â€” 3x',count:3},

  // EVENING
  {cat:'evening', ar:'Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¨ÙÙƒÙ Ø£ÙÙ…Ù’Ø³ÙÙŠÙ’Ù†ÙØ§ ÙˆÙØ¨ÙÙƒÙ Ø£ÙØµÙ’Ø¨ÙØ­Ù’Ù†ÙØ§ ÙˆÙØ¨ÙÙƒÙ Ù†ÙØ­Ù’ÙŠÙØ§ ÙˆÙØ¨ÙÙƒÙ Ù†ÙÙ…ÙÙˆØªÙ ÙˆÙØ¥ÙÙ„ÙÙŠÙ’ÙƒÙ Ø§Ù„Ù’Ù…ÙØµÙÙŠØ±Ù', fr:'Ã” Allah, c\'est par Toi que nous arrivons au soir et par Toi au matin. C\'est par Toi que nous vivons et par Toi que nous mourons, et vers Toi est le retour.', src:'At-Tirmidhi'},
  {cat:'evening', ar:'Ø£ÙÙ…Ù’Ø³ÙÙŠÙ’Ù†ÙØ§ ÙˆÙØ£ÙÙ…Ù’Ø³ÙÙ‰ Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ Ù„ÙÙ„ÙÙ‘Ù‡Ù ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡Ù', fr:'Nous voilÃ  au soir et le royaume appartient Ã  Allah. Louange Ã  Allah. Il n\'y a de divinitÃ© qu\'Allah seul, sans associÃ©.', src:'Muslim'},
  {cat:'evening', ar:'Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙÙ„ÙÙ…ÙØ§ØªÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„ØªÙÙ‘Ø§Ù…ÙÙ‘Ø§ØªÙ Ù…ÙÙ†Ù’ Ø´ÙØ±ÙÙ‘ Ù…ÙØ§ Ø®ÙÙ„ÙÙ‚Ù', fr:'Je cherche refuge auprÃ¨s des paroles parfaites d\'Allah contre le mal de ce qu\'Il a crÃ©Ã©.', src:'Muslim â€” 3x',count:3},

  // SALAH
  {cat:'salah', ar:'Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø£ÙÙ†Ù’ØªÙ Ø§Ù„Ø³ÙÙ‘Ù„ÙØ§Ù…Ù ÙˆÙÙ…ÙÙ†Ù’ÙƒÙ Ø§Ù„Ø³ÙÙ‘Ù„ÙØ§Ù…Ù ØªÙØ¨ÙØ§Ø±ÙÙƒÙ’ØªÙ ÙŠÙØ§ Ø°ÙØ§ Ø§Ù„Ù’Ø¬ÙÙ„ÙØ§Ù„Ù ÙˆÙØ§Ù„Ù’Ø¥ÙÙƒÙ’Ø±ÙØ§Ù…Ù', fr:'Ã” Allah, Tu es la Paix et de Toi vient la paix. BÃ©ni sois-Tu, Ã´ DÃ©tenteur de la majestÃ© et de la gÃ©nÃ©rositÃ©.', src:'Muslim â€” aprÃ¨s le salam'},
  {cat:'salah', ar:'Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù (Ù£Ù£) Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù (Ù£Ù£) Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù (Ù£Ù£) Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡Ù Ù„ÙÙ‡Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ ÙˆÙÙ„ÙÙ‡Ù Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù ÙˆÙÙ‡ÙÙˆÙ Ø¹ÙÙ„ÙÙ‰ ÙƒÙÙ„ÙÙ‘ Ø´ÙÙŠÙ’Ø¡Ù Ù‚ÙØ¯ÙÙŠØ±ÙŒ', fr:'Gloire Ã  Allah (33x), Louange Ã  Allah (33x), Allah est le Plus Grand (33x), puis : Il n\'y a de divinitÃ© qu\'Allah seul...', src:'Muslim â€” aprÃ¨s chaque priÃ¨re'},
  {cat:'salah', ar:'Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ Ø¢ØªÙÙ†ÙØ§ ÙÙÙŠ Ø§Ù„Ø¯ÙÙ‘Ù†Ù’ÙŠÙØ§ Ø­ÙØ³ÙÙ†ÙØ©Ù‹ ÙˆÙÙÙÙŠ Ø§Ù„Ù’Ø¢Ø®ÙØ±ÙØ©Ù Ø­ÙØ³ÙÙ†ÙØ©Ù‹ ÙˆÙÙ‚ÙÙ†ÙØ§ Ø¹ÙØ°ÙØ§Ø¨Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø±Ù', fr:'Notre Seigneur, accorde-nous une belle part dans ce monde, et une belle part dans l\'au-delÃ , et protÃ¨ge-nous du chÃ¢timent du Feu.', src:'Coran 2:201'},

  // FOOD
  {cat:'food', ar:'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù', fr:'Au nom d\'Allah.', src:'Avant de manger'},
  {cat:'food', ar:'Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø£ÙØ·Ù’Ø¹ÙÙ…ÙÙ†ÙÙŠ Ù‡ÙØ°ÙØ§ ÙˆÙØ±ÙØ²ÙÙ‚ÙÙ†ÙÙŠÙ‡Ù Ù…ÙÙ†Ù’ ØºÙÙŠÙ’Ø±Ù Ø­ÙÙˆÙ’Ù„Ù Ù…ÙÙ†ÙÙ‘ÙŠ ÙˆÙÙ„ÙØ§ Ù‚ÙÙˆÙÙ‘Ø©Ù', fr:'Louange Ã  Allah qui m\'a nourri de ceci et me l\'a accordÃ© sans effort ni puissance de ma part.', src:'Abu Dawud â€” aprÃ¨s manger'},

  // SLEEP
  {cat:'sleep', ar:'Ø¨ÙØ§Ø³Ù’Ù…ÙÙƒÙ Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø£ÙÙ…ÙÙˆØªÙ ÙˆÙØ£ÙØ­Ù’ÙŠÙØ§', fr:'En Ton nom, Ã´ Allah, je meurs et je vis.', src:'Al-Bukhari â€” en se couchant'},
  {cat:'sleep', ar:'Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ù‚ÙÙ†ÙÙŠ Ø¹ÙØ°ÙØ§Ø¨ÙÙƒÙ ÙŠÙÙˆÙ’Ù…Ù ØªÙØ¨Ù’Ø¹ÙØ«Ù Ø¹ÙØ¨ÙØ§Ø¯ÙÙƒÙ', fr:'Ã” Allah, prÃ©serve-moi de Ton chÃ¢timent le jour oÃ¹ Tu ressusciteras Tes serviteurs.', src:'Abu Dawud'},
  {cat:'sleep', ar:'Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø£ÙØ­Ù’ÙŠÙØ§Ù†ÙØ§ Ø¨ÙØ¹Ù’Ø¯Ù Ù…ÙØ§ Ø£ÙÙ…ÙØ§ØªÙÙ†ÙØ§ ÙˆÙØ¥ÙÙ„ÙÙŠÙ’Ù‡Ù Ø§Ù„Ù†ÙÙ‘Ø´ÙÙˆØ±Ù', fr:'Louange Ã  Allah qui nous a redonnÃ© la vie aprÃ¨s nous avoir fait mourir, et c\'est vers Lui la rÃ©surrection.', src:'Al-Bukhari â€” au rÃ©veil'},

  // TRAVEL
  {cat:'travel', ar:'Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø³ÙØ®ÙÙ‘Ø±Ù Ù„ÙÙ†ÙØ§ Ù‡ÙØ°ÙØ§ ÙˆÙÙ…ÙØ§ ÙƒÙÙ†ÙÙ‘Ø§ Ù„ÙÙ‡Ù Ù…ÙÙ‚Ù’Ø±ÙÙ†ÙÙŠÙ†Ù ÙˆÙØ¥ÙÙ†ÙÙ‘Ø§ Ø¥ÙÙ„ÙÙ‰ Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ Ù„ÙÙ…ÙÙ†Ù‚ÙÙ„ÙØ¨ÙÙˆÙ†Ù', fr:'Gloire Ã  Celui qui a mis ceci Ã  notre service, alors que nous n\'Ã©tions pas capables de le dominer. Et c\'est vers notre Seigneur que nous retournerons.', src:'Coran 43:13-14'},

  // PROTECTION
  {cat:'protection', ar:'Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙ Ù…ÙÙ†Ù Ø§Ù„Ù’Ù‡ÙÙ…ÙÙ‘ ÙˆÙØ§Ù„Ù’Ø­ÙØ²ÙÙ†Ù ÙˆÙØ§Ù„Ù’Ø¹ÙØ¬Ù’Ø²Ù ÙˆÙØ§Ù„Ù’ÙƒÙØ³ÙÙ„Ù ÙˆÙØ§Ù„Ù’Ø¨ÙØ®Ù’Ù„Ù ÙˆÙØ§Ù„Ù’Ø¬ÙØ¨Ù’Ù†Ù ÙˆÙØ¶ÙÙ„ÙØ¹Ù Ø§Ù„Ø¯ÙÙ‘ÙŠÙ’Ù†Ù ÙˆÙØºÙÙ„ÙØ¨ÙØ©Ù Ø§Ù„Ø±ÙÙ‘Ø¬ÙØ§Ù„Ù', fr:'Ã” Allah, je cherche refuge auprÃ¨s de Toi contre les soucis et la tristesse, contre l\'incapacitÃ© et la paresse, contre l\'avarice et la lÃ¢chetÃ©, contre le poids des dettes et la domination des hommes.', src:'Al-Bukhari'},
  {cat:'protection', ar:'Ø­ÙØ³Ù’Ø¨ÙÙŠÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ù‡ÙÙˆÙ Ø¹ÙÙ„ÙÙŠÙ’Ù‡Ù ØªÙÙˆÙÙƒÙÙ‘Ù„Ù’ØªÙ ÙˆÙÙ‡ÙÙˆÙ Ø±ÙØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙØ±Ù’Ø´Ù Ø§Ù„Ù’Ø¹ÙØ¸ÙÙŠÙ…Ù', fr:'Allah me suffit, il n\'y a de divinitÃ© que Lui. En Lui je place ma confiance et Il est le Seigneur du TrÃ´ne immense.', src:'Coran 9:129 â€” 7x',count:7},

  // FORGIVENESS
  {cat:'forgiveness', ar:'Ø£ÙØ³Ù’ØªÙØºÙ’ÙÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ù’Ø¹ÙØ¸ÙÙŠÙ…Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ù‡ÙÙˆÙ Ø§Ù„Ù’Ø­ÙÙŠÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙŠÙÙ‘ÙˆÙ…Ù ÙˆÙØ£ÙØªÙÙˆØ¨Ù Ø¥ÙÙ„ÙÙŠÙ’Ù‡Ù', fr:'Je demande pardon Ã  Allah le TrÃ¨s Grand, il n\'y a de divinitÃ© que Lui, le Vivant, le Subsistant, et je me repens Ã  Lui.', src:'Abu Dawud'},
  {cat:'forgiveness', ar:'Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø£ÙÙ†Ù’ØªÙ Ø±ÙØ¨ÙÙ‘ÙŠ Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø£ÙÙ†Ù’ØªÙ Ø®ÙÙ„ÙÙ‚Ù’ØªÙÙ†ÙÙŠ ÙˆÙØ£ÙÙ†ÙØ§ Ø¹ÙØ¨Ù’Ø¯ÙÙƒÙ ÙˆÙØ£ÙÙ†ÙØ§ Ø¹ÙÙ„ÙÙ‰ Ø¹ÙÙ‡Ù’Ø¯ÙÙƒÙ ÙˆÙÙˆÙØ¹Ù’Ø¯ÙÙƒÙ Ù…ÙØ§ Ø§Ø³Ù’ØªÙØ·ÙØ¹Ù’ØªÙ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙ Ù…ÙÙ†Ù’ Ø´ÙØ±ÙÙ‘ Ù…ÙØ§ ØµÙÙ†ÙØ¹Ù’ØªÙ Ø£ÙØ¨ÙÙˆØ¡Ù Ù„ÙÙƒÙ Ø¨ÙÙ†ÙØ¹Ù’Ù…ÙØªÙÙƒÙ Ø¹ÙÙ„ÙÙŠÙÙ‘ ÙˆÙØ£ÙØ¨ÙÙˆØ¡Ù Ø¨ÙØ°ÙÙ†Ù’Ø¨ÙÙŠ ÙÙØ§ØºÙ’ÙÙØ±Ù’ Ù„ÙÙŠ ÙÙØ¥ÙÙ†ÙÙ‘Ù‡Ù Ù„ÙØ§ ÙŠÙØºÙ’ÙÙØ±Ù Ø§Ù„Ø°ÙÙ‘Ù†ÙÙˆØ¨Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø£ÙÙ†Ù’ØªÙ', fr:'Ã” Allah, Tu es mon Seigneur, il n\'y a de divinitÃ© que Toi. Tu m\'as crÃ©Ã© et je suis Ton serviteur. Je suis fidÃ¨le Ã  Ton pacte et Ã  Ta promesse autant que je le peux. Je cherche refuge auprÃ¨s de Toi contre le mal que j\'ai commis. Je reconnais Tes bienfaits envers moi et je reconnais mes pÃ©chÃ©s. Pardonne-moi car nul ne pardonne les pÃ©chÃ©s si ce n\'est Toi.', src:'Al-Bukhari â€” Sayyid al-Istighfar'},

  // PARENTS
  {cat:'parents', ar:'Ø±ÙØ¨ÙÙ‘ Ø§Ø±Ù’Ø­ÙÙ…Ù’Ù‡ÙÙ…ÙØ§ ÙƒÙÙ…ÙØ§ Ø±ÙØ¨ÙÙ‘ÙŠÙØ§Ù†ÙÙŠ ØµÙØºÙÙŠØ±Ù‹Ø§', fr:'Seigneur, fais-leur misÃ©ricorde comme ils m\'ont Ã©levÃ© quand j\'Ã©tais petit.', src:'Coran 17:24'},
  {cat:'parents', ar:'Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ Ø§ØºÙ’ÙÙØ±Ù’ Ù„ÙÙŠ ÙˆÙÙ„ÙÙˆÙØ§Ù„ÙØ¯ÙÙŠÙÙ‘ ÙˆÙÙ„ÙÙ„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙŠÙ†Ù ÙŠÙÙˆÙ’Ù…Ù ÙŠÙÙ‚ÙÙˆÙ…Ù Ø§Ù„Ù’Ø­ÙØ³ÙØ§Ø¨Ù', fr:'Seigneur, pardonne-moi, ainsi qu\'Ã  mes parents et aux croyants le jour oÃ¹ se dressera le compte.', src:'Coran 14:41'},

  // GENERAL
  {cat:'general', ar:'Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ Ù„ÙØ§ ØªÙØ²ÙØºÙ’ Ù‚ÙÙ„ÙÙˆØ¨ÙÙ†ÙØ§ Ø¨ÙØ¹Ù’Ø¯Ù Ø¥ÙØ°Ù’ Ù‡ÙØ¯ÙÙŠÙ’ØªÙÙ†ÙØ§ ÙˆÙÙ‡ÙØ¨Ù’ Ù„ÙÙ†ÙØ§ Ù…ÙÙ† Ù„ÙÙ‘Ø¯ÙÙ†ÙƒÙ Ø±ÙØ­Ù’Ù…ÙØ©Ù‹ Ø¥ÙÙ†ÙÙ‘ÙƒÙ Ø£ÙÙ†ØªÙ Ø§Ù„Ù’ÙˆÙÙ‡ÙÙ‘Ø§Ø¨Ù', fr:'Seigneur, ne fais pas dÃ©vier nos cÅ“urs aprÃ¨s nous avoir guidÃ©s. Accorde-nous de Ta part une misÃ©ricorde. C\'est Toi le Grand Donateur.', src:'Coran 3:8'},
  {cat:'general', ar:'Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ³Ù’Ø£ÙÙ„ÙÙƒÙ Ø§Ù„Ù’Ù‡ÙØ¯ÙÙ‰ ÙˆÙØ§Ù„ØªÙÙ‘Ù‚ÙÙ‰ ÙˆÙØ§Ù„Ù’Ø¹ÙÙÙØ§ÙÙ ÙˆÙØ§Ù„Ù’ØºÙÙ†ÙÙ‰', fr:'Ã” Allah, je Te demande la guidÃ©e, la piÃ©tÃ©, la chastetÃ© et la suffisance.', src:'Muslim'},
  {cat:'general', ar:'Ø±ÙØ¨ÙÙ‘ Ø§Ø´Ù’Ø±ÙØ­Ù’ Ù„ÙÙŠ ØµÙØ¯Ù’Ø±ÙÙŠ ÙˆÙÙŠÙØ³ÙÙ‘Ø±Ù’ Ù„ÙÙŠ Ø£ÙÙ…Ù’Ø±ÙÙŠ', fr:'Seigneur, ouvre-moi ma poitrine et facilite-moi ma tÃ¢che.', src:'Coran 20:25-26'},
  {cat:'general', ar:'Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø£ÙÙ†ØªÙ Ø³ÙØ¨Ù’Ø­ÙØ§Ù†ÙÙƒÙ Ø¥ÙÙ†ÙÙ‘ÙŠ ÙƒÙÙ†ØªÙ Ù…ÙÙ†Ù Ø§Ù„Ø¸ÙÙ‘Ø§Ù„ÙÙ…ÙÙŠÙ†Ù', fr:'Il n\'y a de divinitÃ© que Toi. Gloire Ã  Toi ! J\'Ã©tais certes parmi les injustes.', src:'Coran 21:87 â€” Dua de Yunus'},
];

/* ================================================================
   DATA: ADHKAR
   ================================================================ */
const ADHKAR_CATEGORIES = [
  {id:'morning', icon:'ğŸŒ…', ar:'Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­', fr:'Adhkar du Matin', desc:'Ã€ dire aprÃ¨s le Fajr'},
  {id:'evening', icon:'ğŸŒ†', ar:'Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡', fr:'Adhkar du Soir', desc:'Ã€ dire aprÃ¨s le Asr'},
  {id:'after_salah', icon:'ğŸ•Œ', ar:'Ø£Ø°ÙƒØ§Ø± Ø¨Ø¹Ø¯ Ø§Ù„ØµÙ„Ø§Ø©', fr:'AprÃ¨s la PriÃ¨re', desc:'Ã€ dire aprÃ¨s chaque priÃ¨re'},
  {id:'sleep_adhkar', icon:'ğŸŒ™', ar:'Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù†ÙˆÙ…', fr:'Adhkar du Sommeil', desc:'Avant de dormir'},
];

const ADHKAR_DATA = [
  // MORNING
  {cat:'morning', ar:'Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙÙ†Ù Ø§Ù„Ø´ÙÙ‘ÙŠÙ’Ø·ÙØ§Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø¬ÙÙŠÙ…Ù\nØ§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙØ§ Ø¥ÙÙ„ÙÙ°Ù‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ù‡ÙÙˆÙ Ø§Ù„Ù’Ø­ÙÙŠÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙŠÙÙ‘ÙˆÙ…Ù Ûš Ù„ÙØ§ ØªÙØ£Ù’Ø®ÙØ°ÙÙ‡Ù Ø³ÙÙ†ÙØ©ÙŒ ÙˆÙÙ„ÙØ§ Ù†ÙÙˆÙ’Ù…ÙŒ Ûš Ù„ÙÙ‘Ù‡Ù Ù…ÙØ§ ÙÙÙŠ Ø§Ù„Ø³ÙÙ‘Ù…ÙØ§ÙˆÙØ§ØªÙ ÙˆÙÙ…ÙØ§ ÙÙÙŠ Ø§Ù„Ù’Ø£ÙØ±Ù’Ø¶Ù Û— Ù…ÙÙ† Ø°ÙØ§ Ø§Ù„ÙÙ‘Ø°ÙÙŠ ÙŠÙØ´Ù’ÙÙØ¹Ù Ø¹ÙÙ†Ø¯ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø¨ÙØ¥ÙØ°Ù’Ù†ÙÙ‡Ù Ûš ÙŠÙØ¹Ù’Ù„ÙÙ…Ù Ù…ÙØ§ Ø¨ÙÙŠÙ’Ù†Ù Ø£ÙÙŠÙ’Ø¯ÙÙŠÙ‡ÙÙ…Ù’ ÙˆÙÙ…ÙØ§ Ø®ÙÙ„Ù’ÙÙÙ‡ÙÙ…Ù’ Û– ÙˆÙÙ„ÙØ§ ÙŠÙØ­ÙÙŠØ·ÙÙˆÙ†Ù Ø¨ÙØ´ÙÙŠÙ’Ø¡Ù Ù…ÙÙ‘Ù†Ù’ Ø¹ÙÙ„Ù’Ù…ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø¨ÙÙ…ÙØ§ Ø´ÙØ§Ø¡Ù Ûš ÙˆÙØ³ÙØ¹Ù ÙƒÙØ±Ù’Ø³ÙÙŠÙÙ‘Ù‡Ù Ø§Ù„Ø³ÙÙ‘Ù…ÙØ§ÙˆÙØ§ØªÙ ÙˆÙØ§Ù„Ù’Ø£ÙØ±Ù’Ø¶Ù Û– ÙˆÙÙ„ÙØ§ ÙŠÙØ¦ÙÙˆØ¯ÙÙ‡Ù Ø­ÙÙÙ’Ø¸ÙÙ‡ÙÙ…ÙØ§ Ûš ÙˆÙÙ‡ÙÙˆÙ Ø§Ù„Ù’Ø¹ÙÙ„ÙÙŠÙÙ‘ Ø§Ù„Ù’Ø¹ÙØ¸ÙÙŠÙ…Ù', fr:'Ayat al-Kursi â€” Verset du TrÃ´ne', src:'Coran 2:255',count:1,title:'Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ'},
  {cat:'morning', ar:'Ù‚ÙÙ„Ù’ Ù‡ÙÙˆÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙØ­ÙØ¯ÙŒ Û Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„ØµÙÙ‘Ù…ÙØ¯Ù Û Ù„ÙÙ…Ù’ ÙŠÙÙ„ÙØ¯Ù’ ÙˆÙÙ„ÙÙ…Ù’ ÙŠÙÙˆÙ„ÙØ¯Ù’ Û ÙˆÙÙ„ÙÙ…Ù’ ÙŠÙÙƒÙÙ† Ù„ÙÙ‘Ù‡Ù ÙƒÙÙÙÙˆÙ‹Ø§ Ø£ÙØ­ÙØ¯ÙŒ', fr:'Sourate Al-Ikhlas â€” Le MonothÃ©isme Pur', src:'Coran 112',count:3,title:'Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ'},
  {cat:'morning', ar:'Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨ÙÙ‘ Ø§Ù„Ù’ÙÙÙ„ÙÙ‚Ù Û Ù…ÙÙ† Ø´ÙØ±ÙÙ‘ Ù…ÙØ§ Ø®ÙÙ„ÙÙ‚Ù Û ÙˆÙÙ…ÙÙ† Ø´ÙØ±ÙÙ‘ ØºÙØ§Ø³ÙÙ‚Ù Ø¥ÙØ°ÙØ§ ÙˆÙÙ‚ÙØ¨Ù Û ÙˆÙÙ…ÙÙ† Ø´ÙØ±ÙÙ‘ Ø§Ù„Ù†ÙÙ‘ÙÙÙ‘Ø§Ø«ÙØ§ØªÙ ÙÙÙŠ Ø§Ù„Ù’Ø¹ÙÙ‚ÙØ¯Ù Û ÙˆÙÙ…ÙÙ† Ø´ÙØ±ÙÙ‘ Ø­ÙØ§Ø³ÙØ¯Ù Ø¥ÙØ°ÙØ§ Ø­ÙØ³ÙØ¯Ù', fr:'Sourate Al-Falaq â€” L\'Aube Naissante', src:'Coran 113',count:3,title:'Ø³ÙˆØ±Ø© Ø§Ù„ÙÙ„Ù‚'},
  {cat:'morning', ar:'Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨ÙÙ‘ Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù Û Ù…ÙÙ„ÙÙƒÙ Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù Û Ø¥ÙÙ„ÙÙ°Ù‡Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù Û Ù…ÙÙ† Ø´ÙØ±ÙÙ‘ Ø§Ù„Ù’ÙˆÙØ³Ù’ÙˆÙØ§Ø³Ù Ø§Ù„Ù’Ø®ÙÙ†ÙÙ‘Ø§Ø³Ù Û Ø§Ù„ÙÙ‘Ø°ÙÙŠ ÙŠÙÙˆÙØ³Ù’ÙˆÙØ³Ù ÙÙÙŠ ØµÙØ¯ÙÙˆØ±Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù Û Ù…ÙÙ†Ù Ø§Ù„Ù’Ø¬ÙÙ†ÙÙ‘Ø©Ù ÙˆÙØ§Ù„Ù†ÙÙ‘Ø§Ø³Ù', fr:'Sourate An-Nas â€” Les Hommes', src:'Coran 114',count:3,title:'Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø§Ø³'},
  {cat:'morning', ar:'Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡Ù', fr:'Gloire et louange Ã  Allah.', src:'Muslim',count:100,title:'Ø§Ù„ØªØ³Ø¨ÙŠØ­'},
  {cat:'morning', ar:'Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡Ù Ù„ÙÙ‡Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ ÙˆÙÙ„ÙÙ‡Ù Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù ÙˆÙÙ‡ÙÙˆÙ Ø¹ÙÙ„ÙÙ‰ ÙƒÙÙ„ÙÙ‘ Ø´ÙÙŠÙ’Ø¡Ù Ù‚ÙØ¯ÙÙŠØ±ÙŒ', fr:'Il n\'y a de divinitÃ© qu\'Allah seul, sans associÃ©. Ã€ Lui la souverainetÃ©, Ã  Lui la louange et Il est capable de toute chose.', src:'Al-Bukhari & Muslim',count:10,title:'Ø§Ù„ØªÙ‡Ù„ÙŠÙ„'},

  // EVENING
  {cat:'evening', ar:'Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙØ§ Ø¥ÙÙ„ÙÙ°Ù‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ù‡ÙÙˆÙ Ø§Ù„Ù’Ø­ÙÙŠÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙŠÙÙ‘ÙˆÙ…Ù Ûš Ù„ÙØ§ ØªÙØ£Ù’Ø®ÙØ°ÙÙ‡Ù Ø³ÙÙ†ÙØ©ÙŒ ÙˆÙÙ„ÙØ§ Ù†ÙÙˆÙ’Ù…ÙŒ', fr:'Ayat al-Kursi â€” Verset du TrÃ´ne', src:'Coran 2:255',count:1,title:'Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ'},
  {cat:'evening', ar:'Ø£ÙÙ…Ù’Ø³ÙÙŠÙ’Ù†ÙØ§ ÙˆÙØ£ÙÙ…Ù’Ø³ÙÙ‰ Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ Ù„ÙÙ„ÙÙ‘Ù‡Ù ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡Ù Ù„ÙÙ‡Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ ÙˆÙÙ„ÙÙ‡Ù Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù ÙˆÙÙ‡ÙÙˆÙ Ø¹ÙÙ„ÙÙ‰ ÙƒÙÙ„ÙÙ‘ Ø´ÙÙŠÙ’Ø¡Ù Ù‚ÙØ¯ÙÙŠØ±ÙŒ', fr:'Nous voilÃ  au soir et le royaume appartient Ã  Allah...', src:'Muslim',count:1},
  {cat:'evening', ar:'Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙÙ„ÙÙ…ÙØ§ØªÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„ØªÙÙ‘Ø§Ù…ÙÙ‘Ø§ØªÙ Ù…ÙÙ†Ù’ Ø´ÙØ±ÙÙ‘ Ù…ÙØ§ Ø®ÙÙ„ÙÙ‚Ù', fr:'Je cherche refuge auprÃ¨s des paroles parfaites d\'Allah contre le mal de ce qu\'Il a crÃ©Ã©.', src:'Muslim',count:3},
  {cat:'evening', ar:'Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡Ù', fr:'Gloire et louange Ã  Allah.', src:'Muslim',count:100,title:'Ø§Ù„ØªØ³Ø¨ÙŠØ­'},

  // AFTER SALAH
  {cat:'after_salah', ar:'Ø£ÙØ³Ù’ØªÙØºÙ’ÙÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡ÙØŒ Ø£ÙØ³Ù’ØªÙØºÙ’ÙÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡ÙØŒ Ø£ÙØ³Ù’ØªÙØºÙ’ÙÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù', fr:'Je demande pardon Ã  Allah (3 fois).', src:'Muslim',count:3},
  {cat:'after_salah', ar:'Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø£ÙÙ†Ù’ØªÙ Ø§Ù„Ø³ÙÙ‘Ù„ÙØ§Ù…Ù ÙˆÙÙ…ÙÙ†Ù’ÙƒÙ Ø§Ù„Ø³ÙÙ‘Ù„ÙØ§Ù…Ù ØªÙØ¨ÙØ§Ø±ÙÙƒÙ’ØªÙ ÙŠÙØ§ Ø°ÙØ§ Ø§Ù„Ù’Ø¬ÙÙ„ÙØ§Ù„Ù ÙˆÙØ§Ù„Ù’Ø¥ÙÙƒÙ’Ø±ÙØ§Ù…Ù', fr:'Ã” Allah, Tu es la Paix, de Toi vient la paix. BÃ©ni sois-Tu, Ã´ DÃ©tenteur de la majestÃ© et de la gÃ©nÃ©rositÃ©.', src:'Muslim',count:1},
  {cat:'after_salah', ar:'Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù (Ù£Ù£) Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù (Ù£Ù£) Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù (Ù£Ù¤)', fr:'Gloire Ã  Allah (33x), Louange Ã  Allah (33x), Allah est le Plus Grand (34x).', src:'Muslim',count:1},

  // SLEEP
  {cat:'sleep_adhkar', ar:'Ø¨ÙØ§Ø³Ù’Ù…ÙÙƒÙ Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø£ÙÙ…ÙÙˆØªÙ ÙˆÙØ£ÙØ­Ù’ÙŠÙØ§', fr:'En Ton nom, Ã´ Allah, je meurs et je vis.', src:'Al-Bukhari',count:1},
  {cat:'sleep_adhkar', ar:'Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¨ÙØ§Ø³Ù’Ù…ÙÙƒÙ Ø£ÙÙ…ÙÙˆØªÙ ÙˆÙØ£ÙØ­Ù’ÙŠÙØ§', fr:'Ã” Allah, en Ton nom je meurs et je vis.', src:'Al-Bukhari',count:1},
  {cat:'sleep_adhkar', ar:'Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù (Ù£Ù£) Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù (Ù£Ù£) Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù (Ù£Ù¤)', fr:'Gloire Ã  Allah (33), Louange Ã  Allah (33), Allah est le Plus Grand (34).', src:'Al-Bukhari & Muslim',count:1},
];

/* ================================================================
   DATA: VERSE OF THE DAY
   ================================================================ */
const VOD = [
  {ar:'ÙˆÙØ¥ÙØ°ÙØ§ Ø³ÙØ£ÙÙ„ÙÙƒÙ Ø¹ÙØ¨ÙØ§Ø¯ÙÙŠ Ø¹ÙÙ†ÙÙ‘ÙŠ ÙÙØ¥ÙÙ†ÙÙ‘ÙŠ Ù‚ÙØ±ÙÙŠØ¨ÙŒ Ø£ÙØ¬ÙÙŠØ¨Ù Ø¯ÙØ¹Ù’ÙˆÙØ©Ù Ø§Ù„Ø¯ÙÙ‘Ø§Ø¹Ù Ø¥ÙØ°ÙØ§ Ø¯ÙØ¹ÙØ§Ù†Ù', fr:'Et quand Mes serviteurs t\'interrogent sur Moi, Je suis tout proche. Je rÃ©ponds Ã  l\'appel de celui qui M\'invoque.', ref:'Sourate Al-Baqarah 2:186'},
  {ar:'Ø¥ÙÙ†ÙÙ‘ Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§', fr:'Certes, avec la difficultÃ© il y a une facilitÃ©.', ref:'Sourate Ash-Sharh 94:6'},
  {ar:'ÙˆÙÙ…ÙÙ† ÙŠÙØªÙÙ‘Ù‚Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙŠÙØ¬Ù’Ø¹ÙÙ„ Ù„ÙÙ‘Ù‡Ù Ù…ÙØ®Ù’Ø±ÙØ¬Ù‹Ø§ ÙˆÙÙŠÙØ±Ù’Ø²ÙÙ‚Ù’Ù‡Ù Ù…ÙÙ†Ù’ Ø­ÙÙŠÙ’Ø«Ù Ù„ÙØ§ ÙŠÙØ­Ù’ØªÙØ³ÙØ¨Ù', fr:'Et quiconque craint Allah, Il lui donnera une issue et lui accordera Ses dons d\'oÃ¹ il ne s\'y attend pas.', ref:'Sourate At-Talaq 65:2-3'},
  {ar:'ÙˆÙÙ„ÙØ³ÙÙˆÙ’ÙÙ ÙŠÙØ¹Ù’Ø·ÙÙŠÙƒÙ Ø±ÙØ¨ÙÙ‘ÙƒÙ ÙÙØªÙØ±Ù’Ø¶ÙÙ‰Ù°', fr:'Ton Seigneur t\'accordera certes Ses dons, et tu seras satisfait.', ref:'Sourate Ad-Duha 93:5'},
  {ar:'ÙÙØ§Ø°Ù’ÙƒÙØ±ÙÙˆÙ†ÙÙŠ Ø£ÙØ°Ù’ÙƒÙØ±Ù’ÙƒÙÙ…Ù’ ÙˆÙØ§Ø´Ù’ÙƒÙØ±ÙÙˆØ§ Ù„ÙÙŠ ÙˆÙÙ„ÙØ§ ØªÙÙƒÙ’ÙÙØ±ÙÙˆÙ†Ù', fr:'Souvenez-vous de Moi, Je Me souviendrai de vous. Soyez reconnaissants et ne soyez pas ingrats.', ref:'Sourate Al-Baqarah 2:152'},
  {ar:'ÙˆÙÙ†ÙÙ†ÙØ²ÙÙ‘Ù„Ù Ù…ÙÙ†Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù Ù…ÙØ§ Ù‡ÙÙˆÙ Ø´ÙÙÙØ§Ø¡ÙŒ ÙˆÙØ±ÙØ­Ù’Ù…ÙØ©ÙŒ Ù„ÙÙ‘Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙŠÙ†Ù', fr:'Nous faisons descendre du Coran ce qui est guÃ©rison et misÃ©ricorde pour les croyants.', ref:'Sourate Al-Isra 17:82'},
  {ar:'Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ Ù„ÙØ§ ØªÙØ¤ÙØ§Ø®ÙØ°Ù’Ù†ÙØ§ Ø¥ÙÙ† Ù†ÙÙ‘Ø³ÙÙŠÙ†ÙØ§ Ø£ÙÙˆÙ’ Ø£ÙØ®Ù’Ø·ÙØ£Ù’Ù†ÙØ§', fr:'Seigneur, ne nous chÃ¢tie pas si nous oublions ou si nous commettons une erreur.', ref:'Sourate Al-Baqarah 2:286'},
];

/* ================================================================
   STATE
   ================================================================ */
const S = {
  view:'home', type:null, num:null,
  ayahs:[], trans:[], idx:0,
  playing:false, repeat:false, autoplay:true, showTrans:true,
  reciter: localStorage.getItem('q_rec')||'ar.alafasy',
  edition: localStorage.getItem('q_tr')||'fr.hamidullah',
  done: JSON.parse(localStorage.getItem('q_done')||'[]'),
  surahList:null, cache:{},
  duaCat:null, adhkarCat:null, counters:JSON.parse(localStorage.getItem('q_counters')||'{}')
};

const API='https://api.alquran.cloud/v1';
const CDN='https://cdn.islamic.network/quran/audio/128';
const audio=document.getElementById('quran-audio');
const JUZ_AR=['Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙˆÙ„','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù†ÙŠ','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù„Ø«','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø¹','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø®Ø§Ù…Ø³','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³Ø§Ø¯Ø³','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³Ø§Ø¨Ø¹','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù…Ù†','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„ØªØ§Ø³Ø¹','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø¹Ø§Ø´Ø±','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø­Ø§Ø¯ÙŠ Ø¹Ø´Ø±','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø±','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù„Ø« Ø¹Ø´Ø±','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø¹Ø´Ø±','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø®Ø§Ù…Ø³ Ø¹Ø´Ø±','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³Ø§Ø¯Ø³ Ø¹Ø´Ø±','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³Ø§Ø¨Ø¹ Ø¹Ø´Ø±','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù…Ù† Ø¹Ø´Ø±','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„ØªØ§Ø³Ø¹ Ø¹Ø´Ø±','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø¹Ø´Ø±ÙˆÙ†','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø­Ø§Ø¯ÙŠ ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ†','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù†ÙŠ ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ†','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù„Ø« ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ†','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø¹ ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ†','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø®Ø§Ù…Ø³ ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ†','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³Ø§Ø¯Ø³ ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ†','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³Ø§Ø¨Ø¹ ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ†','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù…Ù† ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ†','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„ØªØ§Ø³Ø¹ ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ†','Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ù„Ø§Ø«ÙˆÙ†'];

/* ================================================================
   UTILS
   ================================================================ */
function toAr(n){const d='Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©';return String(n).split('').map(c=>d[+c]||c).join('');}
function showLoading(m){document.getElementById('loading-msg').textContent=m||'ØªØ­Ù…ÙŠÙ„...';document.getElementById('loading').classList.add('show');}
function hideLoading(){document.getElementById('loading').classList.remove('show');}
function showToast(m){const t=document.getElementById('toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),3000);}
function showView(n){document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));document.getElementById('view-'+n).classList.add('active');S.view=n;window.scrollTo(0,0);}

/* ================================================================
   NAVIGATION
   ================================================================ */
function goHome(){audio.pause();S.playing=false;showView('home');document.getElementById('audio-player').classList.remove('show');updatePlayBtn();}
function goToQuran(){showView('quran');}
function goToDuas(){S.duaCat=null;showView('duas');renderDuaCategories();}
function goToAdhkar(){S.adhkarCat=null;showView('adhkar');renderAdhkarCategories();}

/* ================================================================
   QURAN
   ================================================================ */
function saveDone(){localStorage.setItem('q_done',JSON.stringify(S.done));updateProgress();}
function updateProgress(){const n=S.done.length;document.getElementById('progressFill').style.width=(n/30*100)+'%';document.getElementById('progressCount').textContent=n+'/30';document.getElementById('stat-juz').textContent=n;}
function toggleDone(n,e){e.stopPropagation();const i=S.done.indexOf(n);if(i===-1){S.done.push(n);showToast('âœ“ Juz '+n+' marquÃ© lu');}else S.done.splice(i,1);saveDone();renderJuzGrid();}

async function apiFetch(ep){const r=await fetch(API+ep);if(!r.ok)throw new Error('HTTP '+r.status);const j=await r.json();if(j.code!==200)throw new Error('API '+j.code);return j.data;}

async function loadJuz(n){const k='juz_'+n+'_'+S.edition;if(S.cache[k])return S.cache[k];showLoading('ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¬Ø²Ø¡ '+toAr(n));try{const[a,t]=await Promise.all([apiFetch('/juz/'+n+'/quran-uthmani'),apiFetch('/juz/'+n+'/'+S.edition)]);const r={ayahs:a.ayahs,trans:t.ayahs};S.cache[k]=r;return r;}finally{hideLoading();}}

async function loadSurah(n){const k='surah_'+n+'_'+S.edition;if(S.cache[k])return S.cache[k];showLoading('ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©...');try{const[a,t]=await Promise.all([apiFetch('/surah/'+n+'/quran-uthmani'),apiFetch('/surah/'+n+'/'+S.edition)]);const info={number:a.number,name:a.name,englishName:a.englishName,englishNameTranslation:a.englishNameTranslation,numberOfAyahs:a.numberOfAyahs,revelationType:a.revelationType};a.ayahs.forEach(x=>x.surah=info);t.ayahs.forEach(x=>x.surah=info);const r={ayahs:a.ayahs,trans:t.ayahs};S.cache[k]=r;return r;}finally{hideLoading();}}

async function loadSurahList(){if(S.surahList)return S.surahList;const d=await apiFetch('/surah');S.surahList=d;return d;}

async function openJuz(n){showView('reader');S.type='juz';S.num=n;document.getElementById('reader-title').textContent=JUZ_AR[n-1];document.getElementById('reader-subtitle').textContent='Juz '+n+' / 30';document.getElementById('reader-content').innerHTML=loadHTML();try{const d=await loadJuz(n);S.ayahs=d.ayahs;S.trans=d.trans;S.idx=0;renderVerses();renderNav();}catch(e){document.getElementById('reader-content').innerHTML=errHTML('openJuz('+n+')');}}

async function openSurah(n){showView('reader');S.type='surah';S.num=n;document.getElementById('reader-subtitle').textContent='Sourate '+n+' / 114';document.getElementById('reader-content').innerHTML=loadHTML();try{const d=await loadSurah(n);S.ayahs=d.ayahs;S.trans=d.trans;S.idx=0;document.getElementById('reader-title').textContent=d.ayahs[0].surah.name;renderVerses();renderNav();}catch(e){document.getElementById('reader-content').innerHTML=errHTML('openSurah('+n+')');}}

function loadHTML(){return '<div style="text-align:center;padding:80px 20px"><div class="spinner" style="margin:0 auto 16px"></div><div style="font-family:Amiri,serif;color:var(--gold);font-size:1.1rem">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div></div>';}
function errHTML(fn){return '<div class="error-box" style="text-align:center;padding:60px 20px"><div style="font-size:3rem;margin-bottom:16px">âŒ</div><h3 style="color:#e74c3c;font-family:Cinzel,serif;margin-bottom:8px">Erreur de chargement</h3><p style="color:var(--text-dim);margin-bottom:20px">VÃ©rifiez votre connexion</p><button class="retry-btn" style="background:var(--gold);color:var(--night);border:none;padding:12px 28px;border-radius:10px;font-weight:700" onclick="'+fn+'">ğŸ”„ RÃ©essayer</button></div>';}

function renderJuzGrid(){const g=document.getElementById('juz-grid');g.innerHTML='';for(let i=1;i<=30;i++){const d=S.done.includes(i);const c=document.createElement('div');c.className='juz-card'+(d?' completed':'');c.style.animationDelay=Math.min(i,15)*.03+'s';c.innerHTML='<span class="juz-arabic">'+JUZ_AR[i-1].split(' ').slice(0,2).join(' ')+'</span><span class="juz-label">Juz</span><span class="juz-number">'+String(i).padStart(2,'0')+'</span><span class="listen-badge">ğŸ“– Lire</span><button class="mark-btn" onclick="toggleDone('+i+',event)">'+(d?'âœ“ TerminÃ©':'+ Lu')+'</button>';c.addEventListener('click',()=>openJuz(i));g.appendChild(c);}updateProgress();}

let surahRendered=false;
async function renderSurahList(){if(surahRendered)return;const c=document.getElementById('surah-list');c.innerHTML='<div style="text-align:center;padding:30px;color:var(--text-dim)"><div class="spinner" style="margin:0 auto 10px"></div>Chargement...</div>';try{const ss=await loadSurahList();c.innerHTML='';ss.forEach(s=>{const it=document.createElement('div');it.className='surah-item';it.dataset.search=(s.name+' '+s.englishName+' '+s.englishNameTranslation+' '+s.number).toLowerCase();it.innerHTML='<div class="surah-num">'+s.number+'</div><div class="surah-info"><div class="surah-name-ar">'+s.name+'</div><div class="surah-name-en">'+s.englishName+' â€” '+s.englishNameTranslation+'</div></div><div class="surah-meta"><div class="surah-ayah-count">'+s.numberOfAyahs+' v.</div><div class="surah-type">'+(s.revelationType==='Meccan'?'Mecquoise':'MÃ©dinoise')+'</div></div>';it.addEventListener('click',()=>openSurah(s.number));c.appendChild(it);});surahRendered=true;}catch(e){c.innerHTML='<div style="text-align:center;padding:30px;color:#e74c3c">Erreur</div>';}}

function filterSurahs(q){q=q.toLowerCase().trim();document.querySelectorAll('.surah-item').forEach(i=>{i.style.display=(!q||i.dataset.search.includes(q))?'':'none';});}

function switchTab(t){document.getElementById('tab-juz').classList.toggle('active',t==='juz');document.getElementById('tab-surah').classList.toggle('active',t==='surah');document.getElementById('juz-section').style.display=t==='juz'?'':'none';const se=document.getElementById('surah-section');if(t==='surah'){se.classList.add('active');renderSurahList();}else se.classList.remove('active');}

function renderVerses(){const c=document.getElementById('reader-content');c.innerHTML='';let cs=null;S.ayahs.forEach((a,idx)=>{if(!cs||a.surah.number!==cs){cs=a.surah.number;const b=document.createElement('div');b.className='surah-banner';b.innerHTML='<div class="surah-banner-name">'+a.surah.name+'</div><div class="surah-banner-en">'+a.surah.englishName+'</div><div class="surah-banner-detail">'+a.surah.englishNameTranslation+' â€¢ '+a.surah.numberOfAyahs+' versets â€¢ '+(a.surah.revelationType==='Meccan'?'Mecquoise':'MÃ©dinoise')+'</div>';c.appendChild(b);if(a.surah.number!==9&&a.surah.number!==1){const bi=document.createElement('div');bi.className='bismillah';bi.textContent='Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù';c.appendChild(bi);}}const v=document.createElement('div');v.className='verse';v.id='v-'+idx;let h='<div class="verse-head"><span class="verse-num-badge">'+toAr(a.numberInSurah)+'</span><button class="verse-play-btn" id="vb-'+idx+'" onclick="event.stopPropagation();playAyah('+idx+')">â–¶ Ã‰couter</button></div><div class="verse-arabic">'+a.text+' ï´¿'+toAr(a.numberInSurah)+'ï´¾</div>';if(S.showTrans&&S.trans[idx])h+='<div class="verse-translation">'+S.trans[idx].text+'</div>';v.innerHTML=h;v.addEventListener('click',()=>playAyah(idx));c.appendChild(v);});const sp=document.createElement('div');sp.style.height='130px';c.appendChild(sp);document.getElementById('audio-player').classList.add('show');}

function renderNav(){const el=document.getElementById('reader-nav');if(S.type==='juz'){el.innerHTML='<div class="nav-buttons"><button class="nav-btn" onclick="openJuz('+(S.num-1)+')"'+(S.num<=1?' disabled':'')+'>â† Juz prÃ©cÃ©dent</button><button class="nav-btn" onclick="openJuz('+(S.num+1)+')"'+(S.num>=30?' disabled':'')+'>Juz suivant â†’</button></div>';}else{el.innerHTML='<div class="nav-buttons"><button class="nav-btn" onclick="openSurah('+(S.num-1)+')"'+(S.num<=1?' disabled':'')+'>â† Sourate prÃ©c.</button><button class="nav-btn" onclick="openSurah('+(S.num+1)+')"'+(S.num>=114?' disabled':'')+'>Sourate suiv. â†’</button></div>';}}

/* ================================================================
   DUAS
   ================================================================ */
function renderDuaCategories(){
  document.getElementById('duas-back').onclick=goHome;
  document.getElementById('duas-title').textContent='Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©';
  document.getElementById('duas-subtitle').textContent='Invocations Quotidiennes';
  const c=document.getElementById('duas-content');
  c.innerHTML='';
  const wrap=document.createElement('div');wrap.className='dua-categories';
  DUAS_CATEGORIES.forEach(cat=>{
    const count=DUAS_DATA.filter(d=>d.cat===cat.id).length;
    const el=document.createElement('div');el.className='dua-cat';
    el.innerHTML='<span class="dua-cat-icon">'+cat.icon+'</span><div class="dua-cat-ar">'+cat.ar+'</div><div class="dua-cat-name">'+cat.fr+'</div><div class="dua-cat-count">'+count+' invocations</div>';
    el.addEventListener('click',()=>openDuaCategory(cat));
    wrap.appendChild(el);
  });
  c.appendChild(wrap);
}

function openDuaCategory(cat){
  S.duaCat=cat.id;
  document.getElementById('duas-back').onclick=()=>{S.duaCat=null;renderDuaCategories();};
  document.getElementById('duas-title').textContent=cat.ar;
  document.getElementById('duas-subtitle').textContent=cat.fr;
  const c=document.getElementById('duas-content');
  c.innerHTML='';
  const list=document.createElement('div');list.className='content-list';
  const items=DUAS_DATA.filter(d=>d.cat===cat.id);
  items.forEach((dua,i)=>{
    const card=document.createElement('div');card.className='dua-card';
    let h='<div class="dua-card-num">'+(i+1)+'</div>';
    h+='<div class="dua-card-arabic">'+dua.ar+'</div>';
    h+='<div class="dua-card-trans">'+dua.fr+'</div>';
    h+='<div class="dua-card-source">ğŸ“š '+dua.src+'</div>';
    if(dua.count)h+='<div class="dua-card-repeat">ğŸ”„ Ã€ rÃ©pÃ©ter '+dua.count+'x</div>';
    card.innerHTML=h;
    list.appendChild(card);
  });
  if(!items.length)list.innerHTML='<div style="text-align:center;padding:40px;color:var(--text-dim)">BientÃ´t disponible in shaa Allah</div>';
  c.appendChild(list);
  window.scrollTo(0,0);
}

/* ================================================================
   ADHKAR
   ================================================================ */
function renderAdhkarCategories(){
  document.getElementById('adhkar-back').onclick=goHome;
  document.getElementById('adhkar-title').textContent='Ø§Ù„Ø£Ø°ÙƒØ§Ø±';
  document.getElementById('adhkar-subtitle').textContent='Rappels Quotidiens';
  const c=document.getElementById('adhkar-content');
  c.innerHTML='';
  const wrap=document.createElement('div');wrap.className='adhkar-cats';
  ADHKAR_CATEGORIES.forEach(cat=>{
    const count=ADHKAR_DATA.filter(d=>d.cat===cat.id).length;
    const el=document.createElement('div');el.className='adhkar-cat';
    el.innerHTML='<span class="adhkar-cat-icon">'+cat.icon+'</span><div class="adhkar-cat-info"><div class="adhkar-cat-ar">'+cat.ar+'</div><div class="adhkar-cat-name">'+cat.fr+' â€” '+cat.desc+'</div></div><div class="adhkar-cat-count">'+count+'</div>';
    el.addEventListener('click',()=>openAdhkarCategory(cat));
    wrap.appendChild(el);
  });
  c.appendChild(wrap);
}

function openAdhkarCategory(cat){
  S.adhkarCat=cat.id;
  document.getElementById('adhkar-back').onclick=()=>{S.adhkarCat=null;renderAdhkarCategories();};
  document.getElementById('adhkar-title').textContent=cat.ar;
  document.getElementById('adhkar-subtitle').textContent=cat.fr;
  const c=document.getElementById('adhkar-content');
  c.innerHTML='';
  const list=document.createElement('div');list.className='content-list';
  const items=ADHKAR_DATA.filter(d=>d.cat===cat.id);
  items.forEach((dhikr,i)=>{
    const key=cat.id+'_'+i;
    const saved=S.counters[key]||0;
    const target=dhikr.count||1;
    const isDone=saved>=target;
    const card=document.createElement('div');card.className='dua-card';card.id='dhikr-'+key;
    let h='<div class="dua-card-num">'+(i+1)+'</div>';
    if(dhikr.title)h+='<div class="dua-card-title">'+dhikr.title+'</div>';
    h+='<div class="dua-card-arabic">'+dhikr.ar.replace(/\n/g,'<br>')+'</div>';
    h+='<div class="dua-card-trans">'+dhikr.fr+'</div>';
    h+='<div class="dua-card-source">ğŸ“š '+dhikr.src+'</div>';
    if(target>0){
      h+='<div class="dhikr-counter">';
      h+='<button class="counter-btn'+(isDone?' done':'')+'" onclick="countDhikr(\''+key+'\','+target+','+(i)+')" id="cbtn-'+key+'">'+(isDone?'âœ“':'+')+' </button>';
      h+='<div><div class="counter-display" id="cnt-'+key+'">'+saved+'</div><div class="counter-target">/ '+target+'</div></div>';
      h+='</div>';
    }
    card.innerHTML=h;
    list.appendChild(card);
  });
  c.appendChild(list);
  window.scrollTo(0,0);
}

function countDhikr(key,target){
  let v=(S.counters[key]||0)+1;
  if(v>target)v=0; // Reset
  S.counters[key]=v;
  localStorage.setItem('q_counters',JSON.stringify(S.counters));
  document.getElementById('cnt-'+key).textContent=v;
  const btn=document.getElementById('cbtn-'+key);
  if(v>=target){btn.classList.add('done');btn.textContent='âœ“';showToast('âœ… Dhikr terminÃ© â€” BarakAllahu fik !');}
  else{btn.classList.remove('done');btn.textContent='+';}
}

/* ================================================================
   AUDIO
   ================================================================ */
function playAyah(idx){if(idx<0||idx>=S.ayahs.length)return;S.idx=idx;const a=S.ayahs[idx];audio.src=CDN+'/'+S.reciter+'/'+a.number+'.mp3';audio.play().then(()=>{S.playing=true;updatePlayBtn();}).catch(()=>showToast('âš ï¸ Audio non disponible'));highlightVerse(idx);updatePlayerInfo();document.getElementById('audio-player').classList.add('show');}
function togglePlay(){if(!S.ayahs.length)return;if(S.playing){audio.pause();S.playing=false;}else{if(!audio.src||audio.src===location.href){playAyah(0);return;}audio.play().catch(()=>{});S.playing=true;}updatePlayBtn();}
function nextAyah(){if(S.idx<S.ayahs.length-1)playAyah(S.idx+1);}
function prevAyah(){if(S.idx>0)playAyah(S.idx-1);}
function toggleRepeat(){S.repeat=!S.repeat;document.getElementById('btn-repeat').classList.toggle('on',S.repeat);showToast(S.repeat?'ğŸ” RÃ©pÃ©tition activÃ©e':'ğŸ” RÃ©pÃ©tition dÃ©sactivÃ©e');}
function toggleAutoplay(){S.autoplay=!S.autoplay;document.getElementById('btn-autoplay').classList.toggle('on',S.autoplay);}
function updatePlayBtn(){document.getElementById('play-btn').textContent=S.playing?'â¸':'â–¶';}
function updatePlayerInfo(){if(S.ayahs[S.idx]){const a=S.ayahs[S.idx];document.getElementById('player-surah').textContent=a.surah.name+' â€” '+a.surah.englishName;document.getElementById('player-ayah').textContent='Verset '+a.numberInSurah+' / '+a.surah.numberOfAyahs;}}
function highlightVerse(idx){document.querySelectorAll('.verse.playing').forEach(e=>e.classList.remove('playing'));document.querySelectorAll('.verse-play-btn.active-v').forEach(e=>{e.classList.remove('active-v');e.textContent='â–¶ Ã‰couter';});const el=document.getElementById('v-'+idx);if(el){el.classList.add('playing');el.scrollIntoView({behavior:'smooth',block:'center'});}const b=document.getElementById('vb-'+idx);if(b){b.classList.add('active-v');b.textContent='â¸ En cours';}}
function seekAudio(e){const bar=document.getElementById('player-progress');const p=e.offsetX/bar.offsetWidth;if(audio.duration)audio.currentTime=p*audio.duration;}
audio.addEventListener('timeupdate',()=>{if(audio.duration)document.getElementById('player-progress-fill').style.width=(audio.currentTime/audio.duration*100)+'%';});
audio.addEventListener('ended',()=>{if(S.repeat){audio.currentTime=0;audio.play();}else if(S.autoplay&&S.idx<S.ayahs.length-1)playAyah(S.idx+1);else{S.playing=false;updatePlayBtn();}});
audio.addEventListener('error',()=>{showToast('âš ï¸ RÃ©citateur non disponible â€” essayez un autre');S.playing=false;updatePlayBtn();});

/* ================================================================
   TRANSLATION / SETTINGS
   ================================================================ */
function toggleTranslation(){S.showTrans=!S.showTrans;document.getElementById('btn-trans').classList.toggle('on',S.showTrans);showToast(S.showTrans?'ğŸŒ Traduction affichÃ©e':'ğŸŒ Traduction masquÃ©e');if(S.view==='reader'&&S.ayahs.length)renderVerses();}
function openSettings(){document.getElementById('settings-overlay').classList.add('show');}
function closeSettings(){document.getElementById('settings-overlay').classList.remove('show');}
function changeReciter(v){S.reciter=v;localStorage.setItem('q_rec',v);showToast('ğŸ™ï¸ RÃ©citateur changÃ©');if(S.playing)playAyah(S.idx);}
function changeTranslation(v){S.edition=v;localStorage.setItem('q_tr',v);S.cache={};showToast('ğŸŒ Traduction changÃ©e');if(S.view==='reader'&&S.num){if(S.type==='juz')openJuz(S.num);else openSurah(S.num);}}

/* ================================================================
   KEYBOARD
   ================================================================ */
document.addEventListener('keydown',e=>{if(e.target.tagName==='INPUT')return;if(S.view==='reader'){if(e.code==='Space'){e.preventDefault();togglePlay();}if(e.key==='ArrowRight')nextAyah();if(e.key==='ArrowLeft')prevAyah();}if(e.key==='Escape'){if(S.view==='reader')goToQuran();else if(S.view!=='home')goHome();}});

/* ================================================================
   GREETING & VERSE OF THE DAY
   ================================================================ */
function setGreeting(){
  const h=new Date().getHours();
  let g='';
  if(h>=5&&h<12)g='ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ± â€” Bonjour';
  else if(h>=12&&h<17)g='Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ± â€” Bon aprÃ¨s-midi';
  else if(h>=17&&h<21)g='Ù…Ø³Ø§Ø¡ Ø§Ù„Ù†ÙˆØ± â€” Bonsoir';
  else g='Ø·Ø§Ø¨Øª Ù„ÙŠÙ„ØªÙƒÙ… â€” Bonne nuit';
  document.getElementById('greeting').textContent=g;
}

function setVerseOfDay(){
  const today=new Date().getDate()%VOD.length;
  const v=VOD[today];
  document.getElementById('vod-ar').textContent=v.ar;
  document.getElementById('vod-tr').textContent=v.fr;
  document.getElementById('vod-ref').textContent='â€” '+v.ref+' â€”';
}

/* ================================================================
   INIT
   ================================================================ */
(function(){
  document.getElementById('select-reciter').value=S.reciter;
  document.getElementById('select-translation').value=S.edition;
  document.getElementById('btn-trans').classList.toggle('on',S.showTrans);
  document.getElementById('btn-autoplay').classList.toggle('on',S.autoplay);
  setGreeting();
  setVerseOfDay();
  renderJuzGrid();
})();

if('serviceWorker' in navigator)navigator.serviceWorker.register('sw.js').catch(()=>{});
</script>
</body>
</html>
